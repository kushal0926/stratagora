┌──────────────────────────────────────────────────────────────────────┐
│                           CLIENT LAYER                                │
│  ┌────────────────────────────────────────────────────────────────┐  │
│  │            Next.js 16 (App Router) + TypeScript                │  │
│  │  ┌──────────────┐  ┌──────────────┐  ┌──────────────────────┐ │  │
│  │  │   PGN Upload │  │  Chess Board │  │   Analysis Panel     │ │  │
│  │  │   + Parser   │  │  Viewer      │  │   (Engine Output)    │ │  │
│  │  └──────────────┘  └──────────────┘  └──────────────────────┘ │  │
│  │  ┌──────────────┐  ┌──────────────┐  ┌──────────────────────┐ │  │
│  │  │  Chess.com   │  │  Move List   │  │   AI Chat Assistant  │ │  │
│  │  │  Integration │  │  Navigation  │  │   (Claude/GPT)       │ │  │
│  │  └──────────────┘  └──────────────┘  └──────────────────────┘ │  │
│  │  ┌──────────────┐  ┌──────────────┐                           │  │
│  │  │ Auth (Login/ │  │ Saved Games  │                           │  │
│  │  │  Register)   │  │  Library     │                           │  │
│  │  └──────────────┘  └──────────────┘                           │  │
│  └────────────────────────────────────────────────────────────────┘  │
└────────────┬─────────────────────────────────────────────────────────┘
             │
             │ HTTP/REST API
             │
┌────────────▼─────────────────────────────────────────────────────────┐
│                    API LAYER - Go (Chi Router)                        │
│  ┌────────────────────────────────────────────────────────────────┐  │
│  │  /api/auth/register           - User registration              │  │
│  │  /api/auth/login              - User login (JWT)               │  │
│  │  /api/analyze                 - Analyze PGN game               │  │
│  │  /api/games                   - Save/Get analyzed games        │  │
│  │  /api/chess-com/profile/:user - Fetch Chess.com games          │  │
│  │  /api/ai/chat                 - AI assistant chat endpoint     │  │
│  │  /api/ai/analyze-move         - AI move explanation           │  │
│  └────────────────────────────────────────────────────────────────┘  │
└────────────┬─────────────────────────────────────────────────────────┘
             │
┌────────────▼─────────────────────────────────────────────────────────┐
│                      SERVICE LAYER (Go)                               │
│  ┌──────────────────┐  ┌──────────────────┐  ┌──────────────────┐   │
│  │  Auth Service    │  │  Game Service    │  │ Analysis Service │   │
│  │  • JWT tokens    │  │  • PGN parsing   │  │ • Position eval  │   │
│  │  • Password hash │  │  • Game storage  │  │ • Best moves     │   │
│  └──────────────────┘  └──────────────────┘  └──────────────────┘   │
│  ┌──────────────────┐  ┌──────────────────┐  ┌──────────────────┐   │
│  │ Chess.com API    │  │  Cache Service   │  │   AI Service     │   │
│  │ • Fetch games    │  │  • Redis cache   │  │ • Claude API     │   │
│  └──────────────────┘  └──────────────────┘  │ • Context build  │   │
│                                               │ • Chat history   │   │
│                                               └──────────────────┘   │
└────────────┬─────────────────────────────────────────────────────────┘
             │
┌────────────▼─────────────────────────────────────────────────────────┐
│                     CHESS ENGINE + AI LAYER                           │
│  ┌────────────────────────────────────────────────────────────────┐  │
│  │  Chess Engine (github.com/notnil/chess)                        │  │
│  │  ┌─────────────────┐  ┌─────────────────┐  ┌────────────────┐ │  │
│  │  │  Move Generator │  │  Evaluation     │  │  Search Engine │ │  │
│  │  │  • Legal moves  │  │  • Material     │  │  • Alpha-beta  │ │  │
│  │  │  • Validation   │  │  • Position     │  │  • Depth 4-6   │ │  │
│  │  └─────────────────┘  └─────────────────┘  └────────────────┘ │  │
│  └────────────────────────────────────────────────────────────────┘  │
│  ┌────────────────────────────────────────────────────────────────┐  │
│  │  AI Integration (Anthropic Claude API or OpenAI)               │  │
│  │  ┌──────────────────────────────────────────────────────────┐ │  │
│  │  │  • Receives: Game PGN, Position, Analysis, User Question │ │  │
│  │  │  • Returns: Natural language explanation                 │ │  │
│  │  │  • Context: Move history, eval scores, best alternatives │ │  │
│  │  └──────────────────────────────────────────────────────────┘ │  │
│  └────────────────────────────────────────────────────────────────┘  │
└────────────┬─────────────────────────────────────────────────────────┘
             │
┌────────────▼─────────────────────────────────────────────────────────┐
│                    DATA LAYER                                         │
│  ┌───────────────────────────────┐  ┌────────────────────────────┐   │
│  │  PostgreSQL + Drizzle ORM     │  │    Redis Cache             │   │
│  │  ┌─────────────────────────┐  │  │  • Position evaluations   │   │
│  │  │  Tables (4):            │  │  │  • Chess.com API cache    │   │
│  │  │  1. users               │  │  │  • AI chat sessions       │   │
│  │  │  2. games               │  │  └────────────────────────────┘   │
│  │  │  3. analyses            │  │                                   │
│  │  │  4. ai_conversations    │  │                                   │
│  │  └─────────────────────────┘  │                                   │
│  └───────────────────────────────┘                                   │
└──────────────────────────────────────────────────────────────────────┘